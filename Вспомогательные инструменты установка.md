Линтеры и форматтеры
Чтобы код оставался чистым и соответствовал стандартам, используем автоматические инструменты форматирования и проверки:

Black — автоформаттер кода.
Flake8 — линтер для проверки стиля кода.
isort — сортировка импортов.
pre-commit — инструмент для запуска этих проверок перед коммитом.

Обновленная структура проекта
my_project/
│
├── app/
│   ├── __init__.py
│   ├── main.py                 # Основной файл приложения
│   ├── config.py               # Конфигурация проекта (загрузка .env, dataclasses)
│   ├── logger.py               # Настройка логирования
│   ├── models.py               # Модели данных (например, Pydantic-модели)
│
├── .black                      # Конфигурация Black
├── .pre-commit-config.yaml     # Конфигурация pre-commit
├── .flake8                     # Конфигурация Flake8
├── .isort.cfg                  # Конфигурация isort
├── pre-commit                  # Скрипт для pre-commit хуков, который можно запустить через команду `bash pre-commit`
├── .env                        # Файл для переменных окружения
└── requirements.txt            # Список зависимостей


# Установка инструментов
### Сначала установим все необходимые библиотеки:

pip install black flake8 isort pre-commit


                  
Примечание: чтобы все работало корректно, версии библиотек такие:

black==24.8.0
flake8==7.1.1
isort==6.0.0b2
pre-commit==3.8.0
Настройка Black
Создайте файл .black с настройками:

[tool.black]
line-length = 120
target-version = ['py311']  # тут пример под питон 3.11
extend-exclude = '''
    (venv,
    alembic,
    docker,
    .git,
    __pycache__)
'''


                  
Запуск вручную:

black .


                  
Black автоматически отформатирует код.

Настройка Flake8
Создайте файл .flake8:

[flake8]
exclude = __init__.py,venv,alembic,docker,.git,__pycache__
max-line-length = 120
ignore = E203, E266, E501, W503


                  
Запуск вручную:

flake8 .


                  
Этот инструмент укажет на стилистические ошибки в коде.

Настройка isort
Создайте файл .isort.cfg:

[tool.isort]
profile = "black"

[settings]
include_trailing_comma = true
line_length = 120
lines_after_imports = 2
skip = __init__.py,venv,alembic,docker,.git,__pycache__


                  
Запуск вручную:

isort .


                  
isort автоматически отсортирует импорты.

Настройка pre-commit
Создайте файл .pre-commit-config.yaml:

repos:
  - repo: local
    hooks:
      - id: isort
        name: isort
        entry: isort --settings-file ./.isort.cfg .
        args: ["--profile", "black"]
        language: system
        types: [python]
        pass_filenames: false

      - id: black
        name: black
        entry: black --config ./.black .
        language: system
        types: [python]
        pass_filenames: false

      - id: flake8
        name: flake8
        entry: flake8 --config .flake8 .
        language: system
        types: [python]
        pass_filenames: false

                  
Создайте файл pre-commit:

isort --settings-file ./.isort.cfg .
black --config ./.black .
flake8 --config .flake8 .


                  
Теперь можно запустить вручную баш скрип выше (bash pre-commit), чтобы линтеры и форматтеры прошлись по коду проекта и внесли в него редакционные правки.

Подключение pre-commit хуков:

pre-commit install


                  
Теперь перед каждым коммитом будут автоматически запускаться все проверки.

Итог
Использование этих инструментов поможет поддерживать код в чистоте и избежать ошибок перед отправкой изменений в репозиторий. Рекомендуем так осуществлять настройку каждого своего проекта, еще до появления первого файла с кодом приложения.

Теперь ваш проект настроен для работы с переменными окружения, имеет централизованную конфигурацию и систему логирования, что делает его готовым к дальнейшей разработке и масштабированию.